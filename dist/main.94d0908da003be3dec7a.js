(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{"/7QA":function(t,e,n){"use strict";n.r(e);n("OGhG"),n("33JV");var i,r,o=new(function(){function t(){this.nodeData=[]}return t.prototype.getLength=function(){return this.nodeData.length},t.prototype.getData=function(){return this.nodeData},t.prototype.push=function(t){this.nodeData.push({node:t,parent:void 0,children:[]})},t.prototype.turn=function(t){for(var e=t.getAttribute("data-index").split("-"),n=parseInt(e.shift()),i=parseInt(e[e.length-1]),r=this.nodeData[n],o=0,a=e;o<a.length;o++){var l=a[o];r=r.children[parseInt(l)]}!r.parent&&n>0||r.parent&&0!==i?this.createTab(t):this.deleteTab(t)},t.prototype.createTab=function(t){for(var e=t.getAttribute("data-index").split("-"),n=parseInt(e.shift()),i=this.nodeData[n],r=0,o=e;r<o.length;r++){var a=o[r];i=i.children[parseInt(a)]}var l=parseInt(e.pop());if(!i.parent&&n>0){var c=this.nodeData[n-1];c.parent?(i.parent=c.parent,c.parent.children.push(i)):(i.parent=c,c.children.push(i)),this.nodeData.splice(n,1);var s=n-1+"-"+(i.parent.children.length-1);i.node.element.setAttribute("data-index",s),(d=document.createElement("span")).innerHTML="👉",t.insertBefore(d,t.firstChild)}else if(i.parent&&0!==l){i.parent.children.splice(l,1),i.parent=i.parent.children[l-1],i.parent.children.push(i);var d;s=n+(""===e.join("-")?"":"-"+e.join("-"))+"-"+(l-1)+"-"+(i.parent.children.length-1);i.node.element.setAttribute("data-index",s),(d=document.createElement("span")).innerHTML="👉",t.insertBefore(d,t.firstChild)}},t.prototype.deleteTab=function(t){for(var e=t.getAttribute("data-index").split("-"),n=parseInt(e.shift()),i=this.nodeData[n],r=0,o=e;r<o.length;r++){var a=o[r];i=i.children[parseInt(a)]}var l=n+"-";for(a=0;a<i.parent.children.length;a++)i.parent.children[a].node.element===i.node.element&&i.parent.children.splice(a,1);i.parent=i.parent.parent,e.pop(),e.pop(),l+=e.join("-"),i.parent?(l+=i.parent.children.length,i.parent.children.push(i)):(l=this.nodeData.length+"",this.nodeData.push(i)),i.node.element.setAttribute("data-index",l),i.node.element.querySelector("span").remove(),console.log(this.nodeData)},t.prototype.update=function(){},t}()),a=new(function(){function t(){}return t.prototype.set=function(t,e){var n;for(n in t)try{var i=JSON.stringify(t[n]||"");localStorage.setItem("unknown_"+n,i)}catch(e){console.error("设置储存字段失败:",n,t[n])}e&&e()},t.prototype.get=function(t,e){for(var n={},i=0,r=t;i<r.length;i++){var o=r[i];try{var a=localStorage.getItem("unknown_"+o);n[o]=JSON.parse(a)}catch(t){console.error("获取储存字段失败:",o)}}e(n)},t}()),l=(n("HTKd"),new(function(){function t(){this.state={articles:[],containerEl:void 0}}return t.prototype.init=function(t,e){void 0===t&&(t=document.body);var n=document.createElement("div");n.id="sidebar-container",this.rootEl=n,t.append(n),this.initElement(),this.refresh()},t.prototype.refresh=function(){this.initState();var t=this.state.containerEl.firstChild;t&&t.click()},t.prototype.initState=function(){var t=this;a.get(["savedArticleData"],(function(e){var n=e.savedArticleData;n&&(t.state.articles=n),t.renderArticlesList()}))},t.prototype.initElement=function(){var t=document.createElement("p");t.className="title",t.innerText="My Articles",this.rootEl.append(t);var e=document.createElement("div");e.className="articles-list-container",this.state.containerEl=e,this.rootEl.append(e)},t.prototype.handleArticleItemClick=function(t,e){this.state.containerEl.querySelectorAll(".article-container").forEach((function(t){t.className="article-container"})),t.className="article-container active";var n=parseInt(t.getAttribute("data-index"));p.setArticle(this.state.articles[n])},t.prototype.renderArticlesList=function(){var t=this;this.state.containerEl.innerHTML="",this.state.articles.forEach((function(e,n){var i=document.createElement("div");i.className="article-container",i.setAttribute("data-index",n+"");var r=document.createElement("p");r.className="title",r.innerText=e.title,i.append(r);var o=document.createElement("p");o.className="time",o.innerText=new Date(e.createAt).toLocaleDateString(),i.append(o),i.addEventListener("click",t.handleArticleItemClick.bind(t,i)),t.state.containerEl.append(i)}))},t}())),c=function(){function t(){}return t.getById=function(t){return new Promise((function(e,n){a.get(["savedArticleData"],(function(i){i.savedArticleData.forEach((function(n){n.id===t&&e(n)})),n(null)}))}))},t.getAll=function(){return new Promise((function(t,e){a.get(["savedArticleData"],(function(n){var i=n.savedArticleData;i?t(i):e([])}))}))},t.setById=function(t){return new Promise((function(e,n){a.get(["savedArticleData"],(function(i){var r=i.savedArticleData;if(r)for(var o=0,l=r;o<l.length;o++){var c=l[o];c.id===t.id&&(c=t,a.set({savedArticleData:r}),e(!0))}n(!1)}))}))},t}(),s=function(t,e,n,i){return new(n||(n=Promise))((function(r,o){function a(t){try{c(i.next(t))}catch(t){o(t)}}function l(t){try{c(i.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,l)}c((i=i.apply(t,e||[])).next())}))},d=function(t,e){var n,i,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,i=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){a.label=o[1];break}if(6===o[0]&&a.label<r[1]){a.label=r[1],r=o;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(o);break}r[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}},p=new(function(){function t(){this.state={containerEl:void 0,currentEditEl:void 0,titleInputEl:void 0,id:void 0,title:"Untitled"}}return t.prototype.init=function(t,e){void 0===t&&(t=document.body);var n=document.createElement("div");n.className="editor-root-container",this.rootEl=n;var i=document.createElement("input");i.className="editor-title-input",i.setAttribute("type","text"),i.value=this.state.title,this.state.titleInputEl=i,n.append(i);var r=document.createElement("div");r.className="editor-content-container",this.state.containerEl=r,n.append(r),t.append(this.rootEl),this.initState(),this.initEventHandle()},t.prototype.getTitle=function(){return this.state.title},t.prototype.getContentString=function(){return this.state.containerEl.innerHTML},t.prototype.setArticle=function(t){this.state.id=t.id,this.state.title=t.title,this.state.titleInputEl.value=t.title,this.state.containerEl.innerHTML=t.content},t.prototype.saveArticle=function(){return s(this,void 0,void 0,(function(){var t,e;return d(this,(function(n){switch(n.label){case 0:return[4,c.getAll()];case 1:for(t=n.sent(),e=0;e<t.length;e++)if(t[e].id===this.state.id){console.log(t[e]),t[e].content=this.getContentString(),t[e].title=this.getTitle();break}return a.set({savedArticleData:t}),l.refresh(),[2]}}))}))},t.prototype.createArticle=function(){return s(this,void 0,void 0,(function(){var t,e;return d(this,(function(n){switch(n.label){case 0:return[4,c.getAll()];case 1:return t=n.sent(),e={id:Date.now().toString(16),title:"Untitled",content:'<p contenteditable="true" data-index="0">Edit here</p>',createAt:Date.now()},this.state.id=e.id,t?t.unshift(e):t=[e],a.set({savedArticleData:t}),l.refresh(),[2]}}))}))},t.prototype.deleteArticle=function(){return s(this,void 0,void 0,(function(){var t,e=this;return d(this,(function(n){switch(n.label){case 0:return[4,c.getAll()];case 1:return t=(t=n.sent()).filter((function(t){return t.id!==e.state.id})),a.set({savedArticleData:t}),0===t.length&&this.createArticle(),l.refresh(),[2]}}))}))},t.prototype.initState=function(){var t=document.createElement("p");t.setAttribute("contenteditable","true"),t.setAttribute("data-index","0"),t.innerText="Edit here",this.state.containerEl.append(t),o.push({element:t,content:t.innerText})},t.prototype.initEventHandle=function(){this.state.containerEl.addEventListener("click",this.handleEditorClick.bind(this)),this.state.containerEl.addEventListener("keydown",this.handleEditorInput.bind(this)),this.state.titleInputEl.addEventListener("input",this.handleTitleInputChange.bind(this))},t.prototype.handleEditorClick=function(t){this.state.currentEditEl=t.srcElement},t.prototype.handleTitleInputChange=function(t){this.state.title=t.target.value},t.prototype.handleEditorInput=function(t){if("Tab"===t.key)t.preventDefault(),o.turn(this.state.currentEditEl);else if("Enter"===t.key){if(t.preventDefault(),this.state.currentEditEl.nextElementSibling){var e=this.state.currentEditEl.nextElementSibling;this.state.currentEditEl=e}else{var n=document.createElement("p");n.setAttribute("contenteditable","true"),n.setAttribute("data-index",o.getLength()+""),this.state.containerEl.append(n),this.state.currentEditEl=n,o.push({element:n,content:n.innerText})}this.state.currentEditEl.focus()}else if("Backspace"===t.key){var i=this.state.currentEditEl;if(""===i.innerText&&i.previousElementSibling){e=this.state.currentEditEl.previousElementSibling;this.state.currentEditEl=e,i.remove(),t.preventDefault()}this.state.currentEditEl.focus()}},t}()),u=(n("bGvS"),n("MT78")),h=(n("zwkd"),new(function(){function t(){this.state={containerEl:void 0,closeBtnEl:void 0}}return t.prototype.init=function(t,e){void 0===t&&(t=document.body);var n=document.createElement("div");n.className="brain-map-cover";var i=document.createElement("div");i.className="brain-map-container",n.append(i);var r=document.createElement("span");r.className="close-btn",r.innerText="❌",n.append(r),this.rootEl=n,this.state.containerEl=i,this.state.closeBtnEl=r,t.append(this.rootEl),this.initEventHandle();for(var a=u.init(this.state.containerEl),l=[],c=0,s=o.getData();c<s.length;c++){var d=s[c];l.push(this.formatNodesDataToEcharts(d))}var h={series:[{type:"tree",layout:"orthogonal",orient:"LR",symbol:"circle",symbolSize:4,edgeShape:"polyline",roam:"move",itemStyle:{color:"#37352F"},label:{show:!0,color:"#37352F",fontSize:16,position:"right",align:"left",verticalAlign:"middle"},data:l=[{name:p.getTitle(),children:l}],top:"0",left:"5%",leaves:{label:{position:"right",verticalAlign:"middle",align:"left"}},expandAndCollapse:!0,animationDuration:550,animationDurationUpdate:750}]};a.setOption(h)},t.prototype.handleCloseBtnClick=function(){this.rootEl.remove()},t.prototype.initEventHandle=function(){this.state.closeBtnEl.addEventListener("click",this.handleCloseBtnClick.bind(this))},t.prototype.formatNodesDataToEcharts=function(t){if(0===t.children.length)return{name:t.node.element.innerText};for(var e=0;e<t.children.length;e++)t.children[e]=this.formatNodesDataToEcharts(t.children[e]);return{name:t.node.element.innerText,children:t.children}},t}())),f=new(function(){function t(){this.state={}}return t.prototype.init=function(t,e){void 0===t&&(t=document.body);var n=document.createElement("div");n.className="tools-bar-container",this.rootEl=n,t.append(this.rootEl),this.initBtns()},t.prototype.initBtns=function(){var t=document.createElement("button");t.className="tool-btn",t.innerHTML="Gen Brain-Map",t.addEventListener("click",this.handleShowBrainMapClick.bind(this)),this.rootEl.append(t);var e=document.createElement("button");e.className="tool-btn create-article-btn",e.innerHTML="New",e.addEventListener("click",this.handleCreateArticleBtnClick.bind(this)),this.rootEl.append(e);var n=document.createElement("button");n.className="tool-btn save-data-btn",n.innerHTML="Save",n.addEventListener("click",this.handleSaveArticleBtnClick.bind(this)),this.rootEl.append(n);var i=document.createElement("button");i.className="tool-btn delete-article-btn",i.innerHTML="Delete",i.addEventListener("click",this.handleDeleteArticleBtnClick.bind(this)),this.rootEl.append(i);var r=document.createElement("button");r.className="tool-btn save-data-btn",r.innerHTML="TODO",r.addEventListener("click",this.handleCreateArticleBtnClick.bind(this)),this.rootEl.append(r)},t.prototype.handleShowBrainMapClick=function(t){console.log("是时候生成脑图了~"),h.init()},t.prototype.handleSaveArticleBtnClick=function(t){p.saveArticle()},t.prototype.handleCreateArticleBtnClick=function(t){p.createArticle()},t.prototype.handleDeleteArticleBtnClick=function(t){p.deleteArticle()},t}());i=document.body,(r=document.createElement("div")).id="main-container",f.init(r),p.init(r),l.init(),i.append(r)},"/U2I":function(t,e,n){(e=n("JPst")(!1)).push([t.i,".mainFontStyle {\n  color: #37352f;\n  font-size: 16px;\n  line-height: 24px;\n}\n.flexColumn {\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n}\n.brain-map-cover {\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  overflow: hidden;\n  background-color: rgba(255, 255, 255, 0.7);\n}\n.brain-map-cover > .brain-map-container {\n  width: 800px;\n  height: 600px;\n  background-color: white;\n}\n",""]),t.exports=e},"33JV":function(t,e,n){var i=n("LboF"),r=n("qIrS");"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[t.i,r,""]]);var o={insert:"head",singleton:!1},a=(i(r,o),r.locals?r.locals:{});t.exports=a},HTKd:function(t,e,n){var i=n("LboF"),r=n("YdFT");"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[t.i,r,""]]);var o={insert:"head",singleton:!1},a=(i(r,o),r.locals?r.locals:{});t.exports=a},LUCm:function(t,e,n){(e=n("JPst")(!1)).push([t.i,".tools-bar-container {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 70px;\n  padding: 0 10%;\n  z-index: 10;\n  display: flex;\n  flex-direction: row;\n  justify-content: start;\n  align-items: center;\n}\n.tools-bar-container > .tool-btn {\n  cursor: pointer;\n  margin-right: 10px;\n  padding: 3px 15px;\n  font-size: 12px;\n  line-height: 18px;\n  border-radius: 12px;\n  border: 1px solid lightgray;\n  outline: none;\n}\n.tools-bar-container > .tool-btn:hover {\n  color: black;\n  border: 1px solid gray;\n}\n",""]),t.exports=e},OGhG:function(t,e,n){var i=n("LboF"),r=n("a3zi");"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[t.i,r,""]]);var o={insert:"head",singleton:!1},a=(i(r,o),r.locals?r.locals:{});t.exports=a},YdFT:function(t,e,n){(e=n("JPst")(!1)).push([t.i,"#sidebar-container > .title {\n  padding: 10px 14px;\n  font-size: 14px;\n  line-height: 50px;\n  color: #37352f;\n}\n#sidebar-container > .articles-list-container {\n  width: 100%;\n}\n#sidebar-container > .articles-list-container > .article-container {\n  padding: 5px 14px;\n  cursor: pointer;\n  color: #37352f;\n}\n#sidebar-container > .articles-list-container > .article-container > .title {\n  font-size: 14px;\n  line-height: 22px;\n}\n#sidebar-container > .articles-list-container > .article-container > .time {\n  font-size: 11px;\n  line-height: 14px;\n}\n#sidebar-container > .articles-list-container > .article-container:hover {\n  background-color: #e8e7e4;\n  color: black;\n}\n#sidebar-container > .articles-list-container > .article-container:hover > .title {\n  font-size: 14px;\n  font-weight: bold;\n}\n#sidebar-container > .articles-list-container > .article-container.active {\n  background-color: #e8e7e4;\n  color: black;\n}\n#sidebar-container > .articles-list-container > .article-container.active > .title {\n  font-size: 14px;\n  font-weight: bold;\n}\n",""]),t.exports=e},a3zi:function(t,e,n){(e=n("JPst")(!1)).push([t.i,".mainFontStyle {\n  color: #37352f;\n  font-size: 16px;\n  line-height: 24px;\n}\n.flexColumn {\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n}\n* {\n  margin: 0;\n  padding: 0;\n  box-sizing: border-box;\n  font-family: -apple-system, system-ui, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\n}\nbody {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  overflow: hidden;\n  color: #37352f;\n  font-size: 16px;\n  line-height: 24px;\n}\nbody > #sidebar-container {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 200px;\n  height: 100%;\n  overflow-y: auto;\n  background-color: #f7f6f3;\n  display: flex;\n  flex-direction: column;\n  justify-content: start;\n  align-items: start;\n}\nbody > #main-container {\n  position: relative;\n  flex-grow: 1;\n  margin-left: 200px;\n  height: 100%;\n  overflow-y: auto;\n  background-color: white;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n}\n",""]),t.exports=e},bGvS:function(t,e,n){var i=n("LboF"),r=n("LUCm");"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[t.i,r,""]]);var o={insert:"head",singleton:!1},a=(i(r,o),r.locals?r.locals:{});t.exports=a},qIrS:function(t,e,n){(e=n("JPst")(!1)).push([t.i,".mainFontStyle {\n  color: #37352f;\n  font-size: 16px;\n  line-height: 24px;\n}\n.flexColumn {\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n}\n.editor-root-container {\n  position: relative;\n  width: 100%;\n  height: 100%;\n  padding: 70px 10% 40px 10%;\n  display: flex;\n  flex-direction: column;\n  justify-content: start;\n  align-items: center;\n}\n.editor-root-container > .editor-title-input {\n  width: 100%;\n  margin-bottom: 20px;\n  font-size: 40px;\n  font-weight: 700;\n  line-height: 48px;\n  color: #37352f;\n  outline: none;\n  border: none;\n}\n.editor-root-container > .editor-content-container {\n  width: 100%;\n  overflow-y: auto;\n  color: #37352f;\n}\n.editor-root-container > .editor-content-container > [contenteditable='true'] {\n  cursor: text;\n}\n.editor-root-container > .editor-content-container p[contenteditable='true'] {\n  outline: none;\n  padding: 8px 0 2px 0;\n}\n",""]),t.exports=e},zwkd:function(t,e,n){var i=n("LboF"),r=n("/U2I");"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[t.i,r,""]]);var o={insert:"head",singleton:!1},a=(i(r,o),r.locals?r.locals:{});t.exports=a}},[["/7QA",1,2]]]);